import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class CurrencyConverter {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter base currency (e.g., USD): ");
        String base = sc.next().toUpperCase();

        System.out.print("Enter target currency (e.g., INR): ");
        String target = sc.next().toUpperCase();

        System.out.print("Enter amount in " + base + ": ");
        double amount = sc.nextDouble();

        try {
            String urlStr = "https://open.er-api.com/v6/latest/" + base;
            URL url = new URL(urlStr);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");

            BufferedReader in = new BufferedReader(
                    new InputStreamReader(conn.getInputStream())
            );

            StringBuilder response = new StringBuilder();
            String inputLine;

            while ((inputLine = in.readLine()) != null) {
                response.append(inputLine);
            }

            in.close();
            String json = response.toString();

            String search = "\"" + target + "\":";
            int index = json.indexOf(search);

            if (index == -1) {
                System.out.println("Target currency not found in response.");
                return;
            }

            int start = index + search.length();
            int end = json.indexOf(",", start);
            if (end == -1) end = json.indexOf("}", start);

            double rate = Double.parseDouble(json.substring(start, end).trim());

            Map<String, String> symbols = new HashMap<>();
            symbols.put("USD", "$");
            symbols.put("EUR", "€");
            symbols.put("INR", "₹");
            symbols.put("GBP", "£");
            symbols.put("JPY", "¥");
            symbols.put("AUD", "A$");
            symbols.put("CAD", "C$");
            symbols.put("CNY", "¥");
            symbols.put("CHF", "CHF");
            symbols.put("RUB", "₽");

            double converted = amount * rate;
            String baseSymbol = symbols.getOrDefault(base, base + " ");
            String targetSymbol = symbols.getOrDefault(target, target + " ");

            System.out.printf("\n%s%.2f %s = %s%.2f %s\n",
                    baseSymbol, amount, base,
                    targetSymbol, converted, target);

        } catch (Exception e) {
            System.out.println("Error occurred: " + e.getMessage());
        }

        sc.close();
    }
}
